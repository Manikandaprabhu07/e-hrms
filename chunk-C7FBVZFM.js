import{i as c,m as p}from"./chunk-WMLRWR2K.js";import{Db as u,H as l,M as g,ba as n,la as f}from"./chunk-6BNDL2TO.js";import{a as S,b as h}from"./chunk-7CGTOI24.js";var y=class o{http=g(p);apiUrl="/api/employees";employeesSignal=n([]);selectedEmployeeSignal=n(null);isLoadingSignal=n(!1);errorSignal=n(null);paginationSignal=n({pageNumber:1,pageSize:10,totalCount:0,totalPages:0});employees=this.employeesSignal.asReadonly();selectedEmployee=this.selectedEmployeeSignal.asReadonly();isLoading=this.isLoadingSignal.asReadonly();error=this.errorSignal.asReadonly();pagination=this.paginationSignal.asReadonly();employeeCount=u(()=>this.employeesSignal().length);hasEmployees=u(()=>this.employeeCount()>0);getEmployees(e){this.isLoadingSignal.set(!0),this.errorSignal.set(null);let t=new URLSearchParams;return t.set("pageNumber",e.pageNumber.toString()),t.set("pageSize",e.pageSize.toString()),e.sortBy&&t.set("sortBy",e.sortBy),e.sortDirection&&t.set("sortDirection",e.sortDirection),e.searchTerm&&t.set("searchTerm",e.searchTerm),e.filters&&Object.entries(e.filters).forEach(([a,i])=>{t.set(`filters.${a}`,String(i))}),new Promise((a,i)=>{this.http.get(`${this.apiUrl}?${t.toString()}`).subscribe({next:s=>{this.isLoadingSignal.set(!1);let r=s.items||s.data||[];this.employeesSignal.set(r),this.paginationSignal.set({pageNumber:s.pageNumber||1,pageSize:s.pageSize||10,totalCount:s.totalCount||r.length,totalPages:s.totalPages||1}),a(s)},error:s=>{let r=s.error?.message||"Failed to load employees";this.errorSignal.set(r),this.isLoadingSignal.set(!1),i(s)}})})}getEmployeeById(e){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((t,a)=>{this.http.get(`${this.apiUrl}/${e}`).subscribe({next:i=>{this.isLoadingSignal.set(!1),this.selectedEmployeeSignal.set(i),t(i)},error:i=>{let s=i.error?.message||"Failed to load employee";this.errorSignal.set(s),this.isLoadingSignal.set(!1),a(i)}})})}createEmployee(e){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((t,a)=>{this.http.post(this.apiUrl,e).subscribe({next:i=>{this.isLoadingSignal.set(!1),this.employeesSignal.update(s=>[...s,i]),t(i)},error:i=>{let s=i.error?.message||"Failed to create employee";this.errorSignal.set(s),this.isLoadingSignal.set(!1),a(i)}})})}updateEmployee(e,t){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((a,i)=>{this.http.put(`${this.apiUrl}/${e}`,t).subscribe({next:s=>{this.isLoadingSignal.set(!1),this.employeesSignal.update(r=>r.map(d=>d.id===e?s:d)),this.selectedEmployeeSignal()?.id===e&&this.selectedEmployeeSignal.set(s),a(s)},error:s=>{let r=s.error?.message||"Failed to update employee";this.errorSignal.set(r),this.isLoadingSignal.set(!1),i(s)}})})}deleteEmployee(e){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((t,a)=>{this.http.delete(`${this.apiUrl}/${e}`).subscribe({next:()=>{this.isLoadingSignal.set(!1),this.employeesSignal.update(i=>i.filter(s=>s.id!==e)),this.selectedEmployeeSignal()?.id===e&&this.selectedEmployeeSignal.set(null),t()},error:i=>{let s=i.error?.message||"Failed to delete employee";this.errorSignal.set(s),this.isLoadingSignal.set(!1),a(i)}})})}clearSelection(){this.selectedEmployeeSignal.set(null)}clearError(){this.errorSignal.set(null)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var v=class o{errorsSignal=n([]);errors=this.errorsSignal.asReadonly();logError(e){let t;return this.isAppError(e)?t=e:e instanceof Error?t={code:"UNKNOWN_ERROR",message:e.message,details:e.stack,timestamp:new Date}:t={code:"UNKNOWN_ERROR",message:"An unexpected error occurred",details:e,timestamp:new Date},this.errorsSignal.update(a=>[...a,t]),console.error("Application Error:",t),t}clearErrors(){this.errorsSignal.set([])}clearErrorByCode(e){this.errorsSignal.update(t=>t.filter(a=>a.code!==e))}getLastError(){let e=this.errorsSignal();return e.length>0?e[e.length-1]:null}isAppError(e){return typeof e=="object"&&e!==null&&"code"in e&&"message"in e&&"timestamp"in e}static \u0275fac=function(t){return new(t||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var P=class o{http=g(p);platformId=g(f);defaultSettings={theme:"light",language:"en",dateFormat:"dd/MM/yyyy",timeFormat:"h24",pageSize:10,autoSaveInterval:5e3};settingsSignal=n(this.defaultSettings);settings=this.settingsSignal.asReadonly();isDarkMode=u(()=>this.settingsSignal().theme==="dark");constructor(){this.loadSettings()}loadSettings(){if(!c(this.platformId))return;let e=localStorage.getItem("appSettings");if(e)try{let t=JSON.parse(e);this.settingsSignal.set(S(S({},this.defaultSettings),t))}catch(t){console.error("Failed to parse stored settings",t)}}updateSetting(e,t){this.settingsSignal.update(a=>h(S({},a),{[e]:t})),this.saveSettings()}updateSettings(e){this.settingsSignal.update(t=>S(S({},t),e)),this.saveSettings()}resetSettings(){this.settingsSignal.set(this.defaultSettings),c(this.platformId)&&localStorage.removeItem("appSettings"),console.log("Settings reset to defaults")}saveSettings(){if(c(this.platformId))try{localStorage.setItem("appSettings",JSON.stringify(this.settingsSignal()))}catch(e){console.error("Failed to save settings",e)}}static \u0275fac=function(t){return new(t||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var L=class o{http=g(p);apiUrl="/api/payroll";payrollSlipsSignal=n([]);salaryStructuresSignal=n([]);isLoadingSignal=n(!1);errorSignal=n(null);payrollSlips=this.payrollSlipsSignal.asReadonly();salaryStructures=this.salaryStructuresSignal.asReadonly();isLoading=this.isLoadingSignal.asReadonly();error=this.errorSignal.asReadonly();getPayrollSlips(e,t){this.isLoadingSignal.set(!0),this.errorSignal.set(null);let a=new URLSearchParams;return a.set("employeeId",e),a.set("pageNumber",t.pageNumber.toString()),a.set("pageSize",t.pageSize.toString()),new Promise((i,s)=>{this.http.get(`${this.apiUrl}/slips?${a.toString()}`).subscribe({next:r=>{this.isLoadingSignal.set(!1),i(r)},error:r=>{this.errorSignal.set(r.error?.message||"Failed to load payroll slips"),this.isLoadingSignal.set(!1),s(r)}})})}getEmployeeSalaryStructure(e){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((t,a)=>{this.http.get(`${this.apiUrl}/salary-structure/${e}`).subscribe({next:i=>{this.isLoadingSignal.set(!1),t(i)},error:i=>{this.errorSignal.set(i.error?.message||"Failed to load salary structure"),this.isLoadingSignal.set(!1),a(i)}})})}updateSalaryStructure(e,t){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((a,i)=>{this.http.put(`${this.apiUrl}/salary-structure/${e}`,t).subscribe({next:s=>{this.isLoadingSignal.set(!1),a(s)},error:s=>{this.errorSignal.set(s.error?.message||"Failed to update salary structure"),this.isLoadingSignal.set(!1),i(s)}})})}static \u0275fac=function(t){return new(t||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var b=class o{http=g(p);apiUrl="/api/attendance";attendanceRecordsSignal=n([]);isLoadingSignal=n(!1);errorSignal=n(null);attendanceRecords=this.attendanceRecordsSignal.asReadonly();isLoading=this.isLoadingSignal.asReadonly();error=this.errorSignal.asReadonly();getAttendance(e,t){this.isLoadingSignal.set(!0),this.errorSignal.set(null);let a=new URLSearchParams;return a.set("employeeId",e),a.set("pageNumber",t.pageNumber.toString()),a.set("pageSize",t.pageSize.toString()),new Promise((i,s)=>{this.http.get(`${this.apiUrl}?${a.toString()}`).subscribe({next:r=>{this.isLoadingSignal.set(!1),i(r)},error:r=>{this.errorSignal.set(r.error?.message||"Failed to load attendance records"),this.isLoadingSignal.set(!1),s(r)}})})}getAttendanceSummary(e,t,a){this.isLoadingSignal.set(!0),this.errorSignal.set(null);let i=new URLSearchParams({employeeId:e,startDate:t.toISOString(),endDate:a.toISOString()});return new Promise((s,r)=>{this.http.get(`${this.apiUrl}/summary?${i.toString()}`).subscribe({next:d=>{this.isLoadingSignal.set(!1),s(d)},error:d=>{this.errorSignal.set(d.error?.message||"Failed to load attendance summary"),this.isLoadingSignal.set(!1),r(d)}})})}markAttendance(e){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((t,a)=>{this.http.post(`${this.apiUrl}`,e).subscribe({next:i=>{this.isLoadingSignal.set(!1),t(i)},error:i=>{this.errorSignal.set(i.error?.message||"Failed to mark attendance"),this.isLoadingSignal.set(!1),a(i)}})})}static \u0275fac=function(t){return new(t||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var R=class o{http=g(p);apiUrl="/api/leave";leaveRequestsSignal=n([]);leaveBalancesSignal=n([]);isLoadingSignal=n(!1);errorSignal=n(null);leaveRequests=this.leaveRequestsSignal.asReadonly();leaveBalances=this.leaveBalancesSignal.asReadonly();isLoading=this.isLoadingSignal.asReadonly();error=this.errorSignal.asReadonly();getLeaveRequests(e,t){this.isLoadingSignal.set(!0),this.errorSignal.set(null);let a=new URLSearchParams;return a.set("employeeId",e),a.set("pageNumber",t.pageNumber.toString()),a.set("pageSize",t.pageSize.toString()),new Promise((i,s)=>{this.http.get(`${this.apiUrl}/requests?${a.toString()}`).subscribe({next:r=>{this.isLoadingSignal.set(!1),i(r)},error:r=>{this.errorSignal.set(r.error?.message||"Failed to load leave requests"),this.isLoadingSignal.set(!1),s(r)}})})}getLeaveBalance(e,t){this.isLoadingSignal.set(!0),this.errorSignal.set(null);let a=new URLSearchParams({employeeId:e,year:t.toString()});return new Promise((i,s)=>{this.http.get(`${this.apiUrl}/balances?${a.toString()}`).subscribe({next:r=>{this.isLoadingSignal.set(!1),this.leaveBalancesSignal.set(r),i(r)},error:r=>{this.errorSignal.set(r.error?.message||"Failed to load leave balance"),this.isLoadingSignal.set(!1),s(r)}})})}requestLeave(e){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((t,a)=>{this.http.post(`${this.apiUrl}/requests`,e).subscribe({next:i=>{this.isLoadingSignal.set(!1),this.leaveRequestsSignal.update(s=>[...s,i]),t(i)},error:i=>{this.errorSignal.set(i.error?.message||"Failed to request leave"),this.isLoadingSignal.set(!1),a(i)}})})}approveLeaveRequest(e,t){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((a,i)=>{this.http.put(`${this.apiUrl}/requests/${e}/approve`,{remarks:t}).subscribe({next:s=>{this.isLoadingSignal.set(!1),a(s)},error:s=>{this.errorSignal.set(s.error?.message||"Failed to approve leave request"),this.isLoadingSignal.set(!1),i(s)}})})}rejectLeaveRequest(e,t){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((a,i)=>{this.http.put(`${this.apiUrl}/requests/${e}/reject`,{reason:t}).subscribe({next:s=>{this.isLoadingSignal.set(!1),a(s)},error:s=>{this.errorSignal.set(s.error?.message||"Failed to reject leave request"),this.isLoadingSignal.set(!1),i(s)}})})}static \u0275fac=function(t){return new(t||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var E=class o{http=g(p);apiUrl="/api/performance";appraisalsSignal=n([]);trainingsSignal=n([]);isLoadingSignal=n(!1);errorSignal=n(null);appraisals=this.appraisalsSignal.asReadonly();trainings=this.trainingsSignal.asReadonly();isLoading=this.isLoadingSignal.asReadonly();error=this.errorSignal.asReadonly();getAppraisals(e,t){this.isLoadingSignal.set(!0),this.errorSignal.set(null);let a=new URLSearchParams;return a.set("employeeId",e),a.set("pageNumber",t.pageNumber.toString()),a.set("pageSize",t.pageSize.toString()),new Promise((i,s)=>{this.http.get(`${this.apiUrl}/appraisals?${a.toString()}`).subscribe({next:r=>{this.isLoadingSignal.set(!1),i(r)},error:r=>{this.errorSignal.set(r.error?.message||"Failed to load appraisals"),this.isLoadingSignal.set(!1),s(r)}})})}getAppraisalById(e){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((t,a)=>{this.http.get(`${this.apiUrl}/appraisals/${e}`).subscribe({next:i=>{this.isLoadingSignal.set(!1),t(i)},error:i=>{this.errorSignal.set(i.error?.message||"Failed to load appraisal"),this.isLoadingSignal.set(!1),a(i)}})})}createAppraisal(e){return this.isLoadingSignal.set(!0),this.errorSignal.set(null),new Promise((t,a)=>{this.http.post(`${this.apiUrl}/appraisals`,e).subscribe({next:i=>{this.isLoadingSignal.set(!1),this.appraisalsSignal.update(s=>[...s,i]),t(i)},error:i=>{this.errorSignal.set(i.error?.message||"Failed to create appraisal"),this.isLoadingSignal.set(!1),a(i)}})})}getTrainings(e,t){this.isLoadingSignal.set(!0),this.errorSignal.set(null);let a=new URLSearchParams;return a.set("employeeId",e),a.set("pageNumber",t.pageNumber.toString()),a.set("pageSize",t.pageSize.toString()),new Promise((i,s)=>{this.http.get(`${this.apiUrl}/trainings?${a.toString()}`).subscribe({next:r=>{this.isLoadingSignal.set(!1),i(r)},error:r=>{this.errorSignal.set(r.error?.message||"Failed to load trainings"),this.isLoadingSignal.set(!1),s(r)}})})}static \u0275fac=function(t){return new(t||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var N=class o{trainingSessionsSignal=n([{id:"TRN001",title:"Advanced Angular Workshop",trainer:"Google Experts",date:"2026-02-15",duration:"2 Days",status:"Upcoming",enrolledCount:15,maxParticipants:20,description:"Deep dive into signals and standalone components",location:"Conference Room A"},{id:"TRN002",title:"Leadership Skills",trainer:"John Maxwell Team",date:"2026-02-20",duration:"4 Hours",status:"Upcoming",enrolledCount:8,maxParticipants:15,location:"Online Zoom"},{id:"TRN003",title:"Security Compliance 2026",trainer:"Internal Security Team",date:"2026-01-10",duration:"2 Hours",status:"Completed",enrolledCount:45,maxParticipants:50,location:"Auditorium"},{id:"TRN004",title:"Clean Code Practices",trainer:"Robert Martin",date:"2026-02-12",duration:"1 Day",status:"InProgress",enrolledCount:25,maxParticipants:30,location:"Training Hall 1"},{id:"TRN005",title:"System Architecture Review",trainer:"Kiruthik Aswanth",date:"2026-03-05",duration:"3 Hours",status:"Upcoming",enrolledCount:12,maxParticipants:20,description:"Architecture review session led by Senior Architect",location:"Board Room"}]);isLoadingSignal=n(!1);sessions=this.trainingSessionsSignal.asReadonly();isLoading=this.isLoadingSignal.asReadonly();constructor(){}getSessions(){return this.sessions()}static \u0275fac=function(t){return new(t||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{y as a,v as b,N as c};
